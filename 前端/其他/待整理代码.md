
16.::before 和 :after中双冒号和单冒号有什么区别？解释一下这2个伪元素的作用
（1）、冒号(:)用于CSS3伪类，双冒号(::)用于CSS3伪元素。
（2）、::before就是以一个子元素的存在，定义在元素主体内容之前的一个伪元素。并不存在于dom之中，只存在在页面之中。
🍀注意： :before 和 :after 这两个伪元素，是在CSS2.1里新出现的。起初，伪元素的前缀使用的是单冒号语法，但随着Web的进化，在CSS3的规范里，伪元素的语法被修改成使用双冒号，成为::before ::after。

作者：别催我码的慢
链接：<https://juejin.cn/post/6844904185847087111>
来源：稀土掘金
著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。

38.有哪几种隐藏元素的方法？

visibility: hidden; 这个属性只是简单的隐藏某个元素，但是元素占用的空间任然存在；
opacity: 0;``CSS3属性，设置0可以使一个元素完全透明；
position: absolute; 设置一个很大的 left 负值定位，使元素定位在可见区域之外；
display: none; 元素会变得不可见，并且不会再占用文档的空间；
transform: scale(0); 将一个元素设置为缩放无限小，元素将不可见，元素原来所在的位置将被保留；
<div hidden="hidden"> HTML5属性,效果和display:none;相同，但这个属性用于记录一个元素的状态；
height: 0; 将元素高度设为 0 ，并消除边框；
filter: blur(0); CSS3属性，括号内的数值越大，图像高斯模糊的程度越大，到达一定程度可使图像消失（此处感谢小伙伴支持）；

39.li与li之间有看不见的空白间隔是什么原因引起的？有什么解决办法？
li排列受到中间空白(回车/空格)等的影响，因为空白也属于字符，会被应用样式占据空间，产生间隔。解决办法：

在ul中用font-size：0（谷歌不支持）；可以使用letter-space：-3px;
设置float：left；

41.🤭全屏滚动的原理是什么？用到了CSS的哪些属性？
全屏滚动有点类似于轮播，整体的元素一直排列下去，假设有5个需要展示的全屏页面，那么高度是500%，只是展示100%。也可以理解为超出隐藏部分，滚动时显示。
可能用到的CSS属： overflow:hidden; transform:translate(100%, 100%); display:none;
❤️拓展 ： 也可以利用全屏视觉滚动差，使用background-attachment: fixed; 来实现全屏效果。（这里是细心的小伙伴提出的另一个idea🤨）

1. 获取当前页面的滚动位置

```js
const getScrollPosition = (el = window) => ({
    x: el.pageXOffset !== undefined ? el.pageXOffset : el.scrollLeft,
    y: el.pageYOffset !== undefined ? el.pageYOffset : el.scrollTop
})
getScrollPosition(); // {x: 0, y: 200}
```

2. 平滑滚动到页面顶部
const scrollToTop = () => {
    const c = document.documentElement.scrollTop || document.body.scrollTop
    if (c > 0) {
        window.requestAnimationFrame(scrollToTop)
        window.scrollTo(0, c - c / 8)
    }
}
scrollToTop()

3. 确定设备是移动设备还是台式机/笔记本电脑
const detectDeviceType = () =>
    /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i
    .test(navigator.userAgent) ?
    'Mobile' : 'Desktop'
detectDeviceType() // "Mobile" or "Desktop"

4. 带图带事件的桌面通知
function doNotify(title, options = {}, events = {}) {
  const notification = new Notification(title, options)
  for (let event in events) {
    notification[event] = events[event]
  }
}

function notify(title, options = {}, events = {}) {
  if (!('Notification' in window)) {
    return console.error('This browser does not support desktop notification')
  } else if (Notification.permission === 'granted') {
    doNotify(title, options, events)
  } else if (Notification.permission !== 'denied') {
    Notification.requestPermission().then(function (permission) {
      if (permission === 'granted') {
        doNotify(title, options, events)
      }
    })
  }
}
notify(
  '中奖提示',
  {
    icon: 'https://sf1-ttcdn-tos.pstatp.com/img/user-avatar/f1a9f122e925aeef5e4534ff7f706729~300x300.image',
    body: '恭喜你，掘金签到一等奖',
    tag: 'prize'
  },
  {
    onclick(ev) {
      console.log(ev)
      ev.target.close()
      window.focus()
    }
  }
)

5. 数组转树
function treeDataTranslate(data, id = 'id', pid = 'pId') {
  var res = []
  var temp = {}
  for (var i = 0; i < data.length; i++) {
    temp[data[i][id]] = data[i]
  }
  for (var k = 0; k < data.length; k++) {
    if (temp[data[k][pid]] && data[k][id] !== data[k][pid]) {
      if (!temp[data[k][pid]]['children']) {
        temp[data[k][pid]]['children'] = []
      }
      temp[data[k][pid]]['children'].push(data[k])
    } else {
      res.push(data[k])
    }
  }
  return res
}

6. 禁用在浏览器打开控制台
setInterval(function () {
  check()
}, 4000)
var check = function () {
  function doCheck(a) {
    if [('' + a / a]('length') !== 1 || a % 20 === 0) {
      ;(function () {}['constructor']('debugger')())
    } else {
      ;(function () {}['constructor']('debugger')())
    }
    doCheck(++a)
  }
  try {
    doCheck(0)
  } catch (err) {}
}
check()

7. 函数柯里化
function add() {
  let args = [...arguments]
  function _add() {
      args.push(...arguments)
return_add
  }
  _add.toString = function () {
      return args.reduce((pre, cur) => {
          return pre + cur
      })
  }
return_add
}
console.log(add(1, 2)(3, 4)(5)(6)()().toString())

8. toFullScreen：全屏
function toFullScreen() {
  let elem = document.body
  elem.webkitRequestFullScreen
    ? elem.webkitRequestFullScreen()
    : elem.mozRequestFullScreen
    ? elem.mozRequestFullScreen()
    : elem.msRequestFullscreen
    ? elem.msRequestFullscreen()
    : elem.requestFullScreen
    ? elem.requestFullScreen()
    : alert('浏览器不支持全屏')
}

9. exitFullscreen：退出全屏
function exitFullscreen() {
  let elem = parent.document
  elem.webkitCancelFullScreen
    ? elem.webkitCancelFullScreen()
    : elem.mozCancelFullScreen
    ? elem.mozCancelFullScreen()
    : elem.cancelFullScreen
    ? elem.cancelFullScreen()
    : elem.msExitFullscreen
    ? elem.msExitFullscreen()
    : elem.exitFullscreen
    ? elem.exitFullscreen()
    : alert('切换失败,可尝试Esc退出')
}

10. 禁止右键、选择、复制
;['contextmenu', 'selectstart', 'copy'].forEach(function (ev) {
  document.addEventListener(ev, function (event) {
    return (event.returnValue = false)
  })
})

11. 首字母大写
let firstUpperCase = ([first, ...rest]) => first?.toUpperCase() + rest.join('')

12. 数据类型验证
function typeOf(obj) {
  const toString = Object.prototype.toString
  const map = {
    '[object Boolean]': 'boolean',
    '[object Number]': 'number',
    '[object String]': 'string',
    '[object Function]': 'function',
    '[object Array]': 'array',
    '[object Date]': 'date',
    '[object RegExp]': 'regExp',
    '[object Undefined]': 'undefined',
    '[object Null]': 'null',
    '[object Object]': 'object',
    '[object FormData]': 'formData',
    '[object Symbol]': 'symbol',
    '[object BigInt]': 'bigint'
  }
  return map[toString.call(obj)]
}

13. 复制文本
copyPersonURL(content) {
  let that = this
  if (window.ClipboardData) {
      window.clipboardData.setData('text', content)
  } else {
      ;(function (content) {
          document.oncopy = function (e) {
              e.clipboardData.setData('text', content)
              e.preventDefault()
              document.oncopy = null
          }
      })(content)
      document.execCommand('Copy')
  }
}

14.docx文件转html
部分样式无法实现，所以最好还是后端去实现，后端的比较成熟，这里用vue来演示
需要安装插件mammoth
npm install mammoth --save

    <input type="file" name="file" @change="changeFile" />
    <div id="wordView" v-html="wordText" />

import mammoth from "mammoth"

    //选择本地文件预览
    changeFile(event) {
      // if(event.target.files[0].name.indexOf('docx')>-1){
        let that = this;
        let file = event.target.files[0];
        let reader = new FileReader();
        reader.onload = function (loadEvent) {
          let arrayBuffer = loadEvent.target.result; //arrayBuffer
          mammoth
            .convertToHtml({ arrayBuffer: arrayBuffer })
            // .convertToMarkdown({ arrayBuffer: arrayBuffer })
            .then(that.displayResult)
            .done();
        };
        reader.readAsArrayBuffer(file);
      // }
    },
    //页面渲染
    displayResult(result) {
      console.log(result.value)
      this.wordText = result.value;
    }

15.验证'()'是否成对出现
[..."(())()(()())"].reduce((a,i)=> i === '(' ? a+1 : a-1 , 0);
// 输出0则是

16.判断当前标签页是否激活
const isTabInView = () => !document.hidden

17.打开浏览器打印框
const showPrintDialog = () => window.print()

18.html转图片
需要安装插件dom-to-image
npm install dom-to-image

import domtoimage from 'dom-to-image';
downLoadPhoto () {
  const node = document.getElementById('table')//对应的html标签id
  domtoimage.toPng(node)
    .then((dataUrl) => {
      const img = new Image()
      img.src = dataUrl
      // 将获取到的base64下载下来
      const imgUrl = img.src
      if (window.navigator.msSaveOrOpenBlob) {
        const bstr = atob[imgUrl.split(','](1))
        let n = bstr.length
        const u8arr = new Uint8Array(n)
        while (n--) {
          u8arr[n] = bstr.charCodeAt(n)
        }
        const blob = new Blob([u8arr])
        window.navigator.msSaveOrOpenBlob(blob, 'chart-download' + '.' + 'png')
      } else {
        // 这里就按照chrome等新版浏览器来处理
        const a = document.createElement('a')
        a.href = imgUrl
        a.setAttribute('download', 'chart-download')
        a.click()
      }
    })
}

19.字符串转base与base64转字符串
// 加密
function base64EncodeUnicode(str) {
    return btoa(encodeURIComponent(str).replace(/%([0-9A-F]{2})/g, function(match, p1) {
        return String.fromCharCode('0x' + p1);
    }));
}
// 解密
function base64DecodeUnicode(str) {
    return decodeURIComponent(atob(str).split('').map(function(c) {
        return '%' + ('00' + c.charCodeAt(0).toString(16)).slice(-2);
    }).join(''));
}

20.图片添加水印
const setWatermark = ({
  url = '',
  textAlign = 'center',
  textBaseline = 'middle',
  font = "20px Microsoft Yahei",
  fillStyle = 'rgba(184, 184, 184, 0.8)',
  content = '水印',
  cb = null,
  textX = 100,
  textY = 30
} = {}) => {
  const img = new Image()
  img.src = url
  img.crossOrigin = 'anonymous'
  img.onload = function () {
    const canvas = document.createElement('canvas')
    // 斜式水印处理
    const _w = img.width
const_h = img.height
    const clientWidth = document.body.clientWidth
const proportion =_h /_w

    canvas.width = _w
    canvas.height = _h
    const ctx = canvas.getContext('2d')
    ctx.drawImage(img, 0, 0, clientWidth, clientWidth * proportion)
    ctx.textAlign = textAlign
    ctx.textBaseline = textBaseline
    ctx.font = font
    ctx.fillStyle = fillStyle
    // ctx.fillText(content, _w - textX, _h - textY) // 右下角水印

    // 斜式水印
    ctx.rotate((-15 * Math.PI) / 180)
    for (let i = 0; i < 5; i++) {
      for (let j = 0; j < 7; j++) {
        ctx.fillText(content, i * (clientWidth / 5), j * (clientWidth * proportion / 5))
      }
    }
    const base64Url = canvas.toDataURL()
    cb && cb(base64Url)
  }
}
//  用法
setWatermark({
  url: 'xxxx',
  content: '测试水印',
  cb: (base64Url) => {
    console.log(base64Url)
  }
})

21.获取hh:mm:ss时间
const timeFormat = date => date.toTimeString().slice(0, 8)
timeFormat(new Date())

22.移动端获取软键盘高度
// ios软键盘弹起后 可以修改固定底部的元素bottom的值
visualViewport.addEventListener('resize', () => {
  let keyboardHeight = document.body.clientHeight - visualViewport.height
})

一、日期处理

1. 检查日期是否有效
该方法用于检测给出的日期是否有效：
const isDateValid = (...val) => !Number.isNaN(new Date(...val).valueOf());

isDateValid("December 17, 1995 03:24:00");  // true
复制代码
2. 计算两个日期之间的间隔
该方法用于计算两个日期之间的间隔时间：
const dayDif = (date1, date2) => Math.ceil(Math.abs(date1.getTime() - date2.getTime()) / 86400000)

dayDif(new Date("2021-11-3"), new Date("2022-2-1"))  // 90
复制代码
距离过年还有90天~
3. 查找日期位于一年中的第几天
该方法用于检测给出的日期位于今年的第几天：
const dayOfYear = (date) => Math.floor((date - new Date(date.getFullYear(), 0, 0)) / 1000 / 60 / 60 / 24);

dayOfYear(new Date());   // 307
复制代码
2021年已经过去300多天了~
4. 时间格式化
该方法可以用于将时间转化为hour:minutes:seconds的格式：
const timeFromDate = date => date.toTimeString().slice(0, 8);

timeFromDate(new Date(2021, 11, 2, 12, 30, 0));  // 12:30:00
timeFromDate(new Date());  // 返回当前时间 09:00:00
复制代码
二、字符串处理

1. 字符串首字母大写
该方法用于将英文字符串的首字母大写处理：
const capitalize = str => str.charAt(0).toUpperCase() + str.slice(1)

capitalize("hello world")  // Hello world
复制代码
2. 翻转字符串
该方法用于将一个字符串进行翻转操作，返回翻转后的字符串：
const reverse = str => str.split('').reverse().join('');

reverse('hello world');   // 'dlrow olleh'
复制代码
3. 随机字符串
该方法用于生成一个随机的字符串：
const randomString = () => Math.random().toString(36).slice(2);

randomString();
复制代码
4. 截断字符串
该方法可以从指定长度处截断字符串:
const truncateString = (string, length) => string.length < length ? string : `${string.slice(0, length - 3)}...`;

truncateString('Hi, I should be truncated because I am too loooong!', 36)   // 'Hi, I should be truncated because...'
复制代码
5. 去除字符串中的HTML
该方法用于去除字符串中的HTML元素：
const stripHtml = html => (new DOMParser().parseFromString(html, 'text/html')).body.textContent || '';
复制代码
三、数组处理

1. 从数组中移除重复项
该方法用于移除数组中的重复项：
const removeDuplicates = (arr) => [...new Set(arr)];

console.log(removeDuplicates([1, 2, 2, 3, 3, 4, 4, 5, 5, 6]));
复制代码
2. 判断数组是否为空
该方法用于判断一个数组是否为空数组，它将返回一个布尔值：
const isNotEmpty = arr => Array.isArray(arr) && arr.length > 0;

isNotEmpty([1, 2, 3]);  // true
复制代码
3. 合并两个数组
可以使用下面两个方法来合并两个数组：
const merge = (a, b) => a.concat(b);

const merge = (a, b) => [...a, ...b];
复制代码
四、数字操作

1. 判断一个数是奇数还是偶数
该方法用于判断一个数字是奇数还是偶数：
const isEven = num => num % 2 === 0;

isEven(996);
复制代码
2. 获得一组数的平均值
const average = (...args) => args.reduce((a, b) => a + b) / args.length;

average(1, 2, 3, 4, 5);   // 3
复制代码
3. 获取两个整数之间的随机整数
该方法用于获取两个整数之间的随机整数
const random = (min, max) => Math.floor(Math.random() * (max - min + 1) + min);

random(1, 50);
复制代码
4. 指定位数四舍五入
该方法用于将一个数字按照指定位进行四舍五入：
const round = (n, d) => Number(Math.round(n + "e" + d) + "e-" + d)

round(1.005, 2) //1.01
round(1.555, 2) //1.56
复制代码
五、颜色操作

1. 将RGB转化为十六机制
该方法可以将一个RGB的颜色值转化为16进制值：
const rgbToHex = (r, g, b) => "#" + ((1 << 24) + (r << 16) + (g << 8) + b).toString(16).slice(1);

rgbToHex(255, 255, 255);  // '#ffffff'
复制代码
2. 获取随机十六进制颜色
该方法用于获取一个随机的十六进制颜色值：
const randomHex = () => `#${Math.floor(Math.random() * 0xffffff).toString(16).padEnd(6, "0")}`;

randomHex();
复制代码
六、浏览器操作

1. 复制内容到剪切板
该方法使用 navigator.clipboard.writeText 来实现将文本复制到剪贴板：
const copyToClipboard = (text) => navigator.clipboard.writeText(text);

copyToClipboard("Hello World");
复制代码
2. 清除所有cookie
该方法可以通过使用 document.cookie 来访问 cookie 并清除存储在网页中的所有 cookie：
const clearCookies = document.cookie.split(';').forEach(cookie => document.cookie = cookie.replace(/^ +/, '').replace(/=.*/, `=;expires=${new Date(0).toUTCString()};path=/`));
复制代码
3. 获取选中的文本
该方法通过内置的 getSelection 属性获取用户选择的文本：
const getSelectedText = () => window.getSelection().toString();

getSelectedText();
复制代码
4. 检测是否是黑暗模式
该方法用于检测当前的环境是否是黑暗模式，它是一个布尔值：
const isDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches

console.log(isDarkMode)
复制代码
5. 滚动到页面顶部
该方法用于在页面中返回顶部：
const goToTop = () => window.scrollTo(0, 0);

goToTop();
复制代码
6. 判断当前标签页是否激活
该方法用于检测当前标签页是否已经激活：
const isTabInView = () => !document.hidden;
复制代码
7. 判断当前是否是苹果设备
该方法用于检测当前的设备是否是苹果的设备：
const isAppleDevice = () => /Mac|iPod|iPhone|iPad/.test(navigator.platform);

isAppleDevice();
复制代码
8. 是否滚动到页面底部
该方法用于判断页面是否已经底部：
const scrolledToBottom = () => document.documentElement.clientHeight + window.scrollY >= document.documentElement.scrollHeight;
复制代码
9. 重定向到一个URL
该方法用于重定向到一个新的URL：
const redirect = url => location.href = url

redirect("https://www.google.com/")
复制代码
10. 打开浏览器打印框
该方法用于打开浏览器的打印框：
const showPrintDialog = () => window.print()
复制代码
七、其他操作

1. 随机布尔值
该方法可以返回一个随机的布尔值，使用Math.random()可以获得0-1的随机数，与0.5进行比较，就有一半的概率获得真值或者假值。
const randomBoolean = () => Math.random() >= 0.5;

randomBoolean();
复制代码
2. 变量交换
可以使用以下形式在不适用第三个变量的情况下，交换两个变量的值：
[foo, bar] = [bar, foo];
复制代码
3. 获取变量的类型
该方法用于获取一个变量的类型：
const trueTypeOf = (obj) => Object.prototype.toString.call(obj).slice(8, -1).toLowerCase();

trueTypeOf('');     // string
trueTypeOf(0);      // number
trueTypeOf();       // undefined
trueTypeOf(null);   // null
trueTypeOf({});     // object
trueTypeOf([]);     // array
trueTypeOf(0);      // number
trueTypeOf(() => {});  // function
复制代码
4. 华氏度和摄氏度之间的转化
该方法用于摄氏度和华氏度之间的转化：
const celsiusToFahrenheit = (celsius) => celsius *9/5 + 32;
const fahrenheitToCelsius = (fahrenheit) => (fahrenheit - 32)* 5/9;

celsiusToFahrenheit(15);    // 59
celsiusToFahrenheit(0);     // 32
celsiusToFahrenheit(-20);   // -4
fahrenheitToCelsius(59);    // 15
fahrenheitToCelsius(32);    // 0
复制代码
5. 检测对象是否为空
该方法用于检测一个JavaScript对象是否为空：
const isEmpty = obj => Reflect.ownKeys(obj).length === 0 && obj.constructor === Object;
