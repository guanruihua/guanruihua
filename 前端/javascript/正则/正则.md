# 正则

## 创建

- 字面量    `var [变量名] = /表达式/模式修饰符`
- 构造函数   `var [变量名] = new RegExp("表达式", "模式修饰符")`

  ```javascript
    var str = "guanruihua"
    var patt = /rui/i
    document.write(str.match(patt))
    document.write(str.test(patt))
    ```

## 规则

### 单个字符与数字

| 标识符      | 描述                   |
| :---------- | :--------------------- |
| `.   :`     | 除换行符之外的任意字符 |
| `[a-z0-9]`  | 方括号中的任意字符     |
| `[^a-z0-9]` | 不在方括号中的任意字符 |
| `\d`        | 数字                   |
| `\D`        | 非数值                 |
| `\w`        | 字母                   |
| `\W`        | 非字母                 |

### 空白字符

| 标识符 | 描述                            |
| :----- | :------------------------------ |
| `\0`   | null                            |
| `\b`   | 空格                            |
| `\f`   | 换页符                          |
| `\n`   | 换行符                          |
| `\r`   | 回车符                          |
| `\s`   | 空白字符,空格符, 制表符, 换行符 |
| `\S`   | 非空白字符                      |
| `\t`   | 制表符                          |

### 定位符

| 标识符 | 描述                       |
| :----- | :------------------------- |
| `^`    | 行首匹配符                 |
| `$`    | 行尾匹配符                 |
| `\A`   | 值匹配字符串最开始处       |
| `\b`   | 匹配单词边界, 词在[]内无效 |
| `\B`   | 匹配非单词边界             |
| `\G`   | 匹配当前搜索的开始位置     |
| `\Z`   | 字符串结束处               |
| `\z`   | 只匹配字符串结束处         |

### 限制符

| 标识符    | 描述                  |
| :-------- | :-------------------- |
| `x?`      | 匹配0个或1个x         |
| `x*`      | 匹配0个或任意多个x    |
| `x+`      | 匹配至少一个x         |
| `x{m, n}` | 匹配最少m个, 最多n个x |
| `x        | y                     | z` | 匹配x或y或z(或模式) |

## 断言

| 标识符         | 描述             | 字符串                                  | 正则           | 结果                |
| :------------- | :--------------- | :-------------------------------------- | :------------- | :------------------ |
| `(?:x)`        | 匹配x            |
| `(?=pattern)`  | 零宽正向先行断言 |
| `(?!pattern)`  | 零宽负向先行断言 | `'regex represents regular expression'` | `/re(?!g)/g`   | `['re','re','re']`  |
| `(?<=pattern)` | 零宽正向后行断言 | `'regex represents regular expression'` | `/(?<=\w)re/g` | `['re','re']`       |
| `(?<!pattern)` | 零宽负向后行断言 | `'regex represents regular expression'` | `/(?<!\w)re/g` | `['re','re', 're']` |

### 模式修饰符

| 标识符 | 描述                     |
| :----- | :----------------------- |
| `g`    | 全局模式, 应用所有字符串 |
| `i`    | 区分大小写模式           |
| `m`    | 多行匹配模式             |

## 属性

- 实例属性
  - global   检测是否设置g标记
  - ignoreCase 检测是否设置i标记
  - multiline  检测是否设置了m标记
  - lastIndex 开始检索上一个匹配项的字符位置
  - source   返回正则表达式的字符串表示
  - nextIndex 返回被查找字符串中下一个成功匹配的开始位置
- 构造函数属性
  - \$1....\$9  返回就搞在模式匹配期间找的,最近保存的部分
  - $_    input      返回最近一次匹配的字符串
  - $&    lastMatch   返回最近一次的匹配项
  - $+    lastParen    返回最近一次匹配的捕获组
  - $`    leftContext   返回被查找的字符串中从字符串开始位置到最后匹配之前的位置之间的字符
  - $'     rightContext 返回被搜索的字符串中从最后一个匹配位置开始到字符串结尾之间的字符
  - $*     multiline   检测表达式是否采用多行模式匹配m

## 方法

### RegExp

- exec
  - 功能: 在字符串中执行匹配检索, 返回结果数组
  - 参数:要应用模式匹配的字符串
  - 特性:
    - 使用全局标记g      持续查找所有匹配项并返回
    - 不适用全局标记g  始终返回第一个匹配项信息
  - 执行过程
      1. 检索字符串参数, 获取正则表达式匹配文本
      2. 找到匹配文本则返回一个数组
         - 第0个元素    与整个模式匹配的字符串
         - 其他元素      与捕获匹配的字符串
      3. 否则返回null
  - 派生属性
    - index    匹配项在字符串中的位置
    - input    应用正则表达式的字符串
    - length   返回数组元素个数
- test   功能   在字符串中测试模式匹配,  返回true或false

### String

- match    找到一个或多个正则表达式的匹配
- replace   替换与正则表达式匹配的字符串
- search    检索与正则表达式相配的值
- split        把字符串分割为字符串数组

## 案例

### 数字的千位分隔符表示法

```javascript
// "12345678" => "12,345,678"
"12345678".replace(/(?=\d{3}$)/g, ',')
"12345678".replace(/(?=(\d{3})+$)/g, ',')

var string = "12345678 123456789"
reg = /(?!\b)(?=(\d{3})+\b)/g;

var result = string.replace(reg, ',')
console.log(result); 

// => "12,345,678 123,456,789"
```

中文: `[\u4e00-\u9fa5]`

1.由数字、26个英文字母或者下划线组成的字符串:

 ^[0-9a-zA-Z_]{1,}$
1
2.非负整数（正整数 + 0 ）:

    ^/d+$
1
3.正整数:

   ^[0-9]*[1-9][0-9]*$
1
4.非正整数（负整数 + 0）：

   ^((-/d+)|(0+))$
1
5.负整数 :

  ^-[0-9]*[1-9][0-9]*$
1
6.整数:

 ^-?/d+$
1
7.非负浮点数（正浮点数 + 0）:

  ^/d+(/./d+)?$
1
8.正浮点数 :

  ^(([0-9]+/.[0-9]*[1-9][0-9]*)|([0-9]*[1-9][0-9]*/.[0-9]+)|([0-9]*[1-9][0-9]*))$
1
9.非正浮点数（负浮点数 + 0）:

    ^((-/d+(/./d+)?)|(0+(/.0+)?))$
1
10.负浮点数 :

    ^(-(([0-9]+/.[0-9]*[1-9][0-9]*)|([0-9]*[1-9][0-9]*/.[0-9]+)|([0-9]*[1-9][0-9]*)))$
1
11.浮点数 :

 ^(-?/d+)(/./d+)?$
1
12.由26个英文字母组成的字符串 :

    ^[A-Za-z]+$
1
13.由26个英文字母的大写组成的字符串 :

  ^[A-Z]+$
1
14.由26个英文字母的小写组成的字符串 :

    ^[a-z]+$
1
15.由数字和26个英文字母组成的字符串 :

    ^[A-Za-z0-9]+$
1
16.由数字、26个英文字母或者下划线组成的字符串 :

  ^/w+$
1
17.email地址 :

   ^[/w-]+(/.[/w-]+)*@[/w-]+(/.[/w-]+)+$
1
18.url:

    ^[a-zA-z]+://(/w+(-/w+)*)(/.(/w+(-/w+)*))*(/?/S*)?$
1
19.年-月-日:

   /^(d{2}|d{4})-((0([1-9]{1}))|(1[1|2]))-(([0-2]([1-9]{1}))|(3[0|1]))$/
1
20.月/日/年:

  /^((0([1-9]{1}))|(1[1|2]))/(([0-2]([1-9]{1}))|(3[0|1]))/(d{2}|d{4})$/
1
21.Emil:

    ^([w-.]+)@(([[0-9]{1,3}.[0-9]{1,3}.[0-9]{1,3}.)|(([w-]+.)+))([a-zA-Z]{2,4}|[0-9]{1,3})(]?)$
1
22.电话号码:

    (d+-)?(d{4}-?d{7}|d{3}-?d{8}|^d{7,8})(-d+)?
1
23.IP地址:

    ^(d{1,2}|1dd|2[0-4]d|25[0-5]).(d{1,2}|1dd|2[0-4]d|25[0-5]).(d{1,2}|1dd|2[0-4]d|25[0-5]).(d{1,2}|1dd|2[0-4]d|25[0-5])$
1
24.匹配中文字符的正则表达式：

   [/u4e00-/u9fa5]
1
25.匹配双字节字符(包括汉字在内)：

   [^/x00-/xff]
1
26.匹配空行的正则表达式：

    /n[/s| ]*/r
1
27.匹配HTML标记的正则表达式：

  /<(.*)>.*<///1>|<(.*) //>/
1
28.匹配首尾空格的正则表达式：

  (^/s*)|(/s*$)
1
29.匹配Email地址的正则表达式：

    /w+([-+.]/w+)*@/w+([-.]/w+)*/./w+([-.]/w+)*
1
30.匹配网址URL的正则表达式：

  ^[a-zA-z]+://(//w+(-//w+)*)(//.(//w+(-//w+)*))*(//?//S*)?$
1
31.匹配帐号是否合法(字母开头，允许5-16字节，允许字母数字下划线)：

   ^[a-zA-Z][a-zA-Z0-9_]{4,15}$
1
32.匹配国内电话号码：

    (/d{3}-|/d{4}-)?(/d{8}|/d{7})?
1
33.匹配腾讯QQ号：

  ^[1-9]*[1-9][0-9]*$
1
34.只能输入数字：

   ^[0-9]*$
1
35.只能输入n位的数字：

^/d{n}$
1
36.只能输入至少n位的数字：

^/d{n,}$
1
37.只能输入m~n位的数字：

    ^/d{m,n}$
1
38.只能输入零和非零开头的数字：

  ^(0|[1-9][0-9]*)$
1
39.只能输入有两位小数的正实数：

  ^[0-9]+(.[0-9]{2})?$
1
40.只能输入有1~3位小数的正实数：

 ^[0-9]+(.[0-9]{1,3})?$
1
41.只能输入非零的正整数：

   ^/+?[1-9][0-9]*$
1
42.只能输入非零的负整数：

  ^/-[1-9][0-9]*$
1
43.只能输入长度为3的字符：

  ^.{3}$
1
44.只能输入由26个英文字母组成的字符串：

 ^[A-Za-z]+$
1
45.只能输入由26个大写英文字母组成的字符串：

    ^[A-Z]+$
1
46.只能输入由26个小写英文字母组成的字符串：

    ^[a-z]+$
1
47.只能输入由数字和26个英文字母组成的字符串：

 ^[A-Za-z0-9]+$
1
48.只能输入由数字和26个英文字母或者下划线组成的字符串：

    ^/w+$
1
49.验证用户密码(正确格式为： 以字母开头，长度在5~17 之间，只能包含字符、数字和下划线)

  ^[a-zA-Z]/w{5,17}$
1
50.验证是否包含有 ^%&’,;=?$/"等字符：

 [^%&',;=?$/x22]+
1
51.只能输入汉字：

  ^[\u4e00-\u9fa5]{0,}$
1
52、只含有汉字、数字、字母、下划线不能以下划线开头和结尾

   ^(?!_)[?!.*?_$](a-zA-Z0-9_\u4e00-\u9fa5)+$
1
53、只含有汉字、数字、字母、下划线，下划线位置不限

    ^[a-zA-Z0-9_\u4e00-\u9fa5]+$
1
54、2~4个汉字

 @"^[\u4E00-\u9FA5]{2,4}$
