---
title: vim
date: 2020-10-17 17:17:18
tags: 
- vim
- tools 
---

# VIM

> [Vim 常用操作 (juejin.cn)](https://juejin.cn/post/6847902217882746893)

> 编辑器 
>
> - eclipse vim 插件 Vrapper
>   - 修改快捷键 windows -> preferences -> generals -> keys 
>   - 输入vrapper 然后就跨域修改vim快捷键了
>     - ctrl + b

![](https://www.runoob.com/wp-content/uploads/2015/10/vi-vim-cheat-sheet-sch.gif)



##  常用指令

| 指令                                                         | 描述 |
| ------------------------------------------------------------ | ---- |
| `[数字] + 指令` => 重复执行次数                              |      |
| `:.,+n` => 指定当前行往下n行                                 |      |
| 词单位移动 右移动: `w | e` 左移动: `b`                       |      |
| 文字最前: `^ `  行首: `0[零]`                                |      |
| 文字最后: `$`  行末: `A`                                     |      |
| `ctrl-f` 向后翻页 `ctrl-b` 向后翻页                          |      |
| `zz` 重绘屏幕，把当前行显示在窗口正中                        |      |
| 撤销 : `u`   , 撤销上一个操作:  `ctrl +r `                   |      |
| 首行 `gg` , 行末 `G`                                         |      |
| 全删: `ggdG`                                                 |      |
| `ggVG` : 全部复制                                            |      |
| `Ctrl-b` 上一页， `Ctrl-f `下一页                            |      |
| ( : 跳至上一句开头，  **)** : 跳至下一局开头<br/>**{** : 上一段开头，  **}** : 下一段开头 ` [ 都是通过空行区分 ]` |      |
| **H** 将光标定位到屏幕的顶端 **M**  屏幕的中间 **L**  屏幕的底端 |      |
| `gv` 重选上一次由可视模式选择的文本范围<br>`vi[符号]`: 通过符号选择 |      |

### 删除

> 行
>
> - 从光标删除到行**末** `d$`
> - 从光标处删除到行**前**`d^`
> - 删除当行`dd`
> - 删除多行`*dd`[ * :填行数]
> - 删除多词 `d*[w/e]`
> - ` ci}` 修改花括号内内容
> - `dap` 删除一个段落（以空行界定，段落后的空行也会删除）
>
> 单词
>
> - `dw`  从光标处删除至下一个单词的起始处(不保留单词间的空格) 
>
> -  `de`  从光标处删除至一个单词的末尾(就是会保留单词间的空格)

### 复制&粘贴

> 全部复制`ggVG`
>
> 复制
>
> - 单行复制`yy`
> - 多行复制`*yy`[ * : 填行数]
> - 选择部分复制`v`[进入可视模式]+通过光标移动选择要复制部分+`y`[复制]
>
> 粘贴
>
> - 粘贴到光标前`P`
> - 粘贴到光标后`p`
>
> 将1-10行插入到第20行之后:` :1,10 co 20`  = > (可以使用相对行数写法 )



##  可视化模式

### 常用

>  `gv` 重选上一次由可视模式选择的文本范围
>
> `vi[符号]`: 通过符号选择





> `v` : 单字符模式
>
> `V`: 行模式
>
> `ctrl+v` : 列模式

### 选

> **gv** 重选上一次由可视模式选择的文本范围
>
> 包含括号
>
> -  **ab** 选中括号中的内容
>
> -  **aB** 选中{}括号中的内容
>
> 不包含括号
>
> - **ib** 选中括号中的内容
>
> - **iB** 选中{}中的内容
>
> 通过符号选择
>
> - `vi + [符号] `高亮选中花括号中内容( 符号可选: 外逗号、单引号、双引号等也是一样的 )
> - **vi}**  高亮选中花括号中内容
> - **va}**  高亮选中花括号及花括号中的内容。

### 操作

> **U** 选中块都转换成大写，**~** 切换块中内容的大小写，
>
> **>** 块右移， **<** 块左移，  
>
> **y** 复制块，  **d** 删除块，  **r** 替换， **c** 删除并进去插入模式
>
> - **I** 和 **A** 进入插入模式，置光标于选块的开始和结尾(小写的不行)
> - **o** 跳转选中块的末端， **O** 跳至首端



## 备注 commentary

| 描述     | 操作                                                         |
| -------- | ------------------------------------------------------------ |
| 备注多行 | visual 模式 选择 要备注的代码 内容 输入`gc`                  |
| 备注一行 | 直接在需要备注的行输入`gc`                                   |
| 替换指令 | 全部行首添加`//` :  `:% s/^/\/\//g` <br/>在2-50行首添加`//`  :  `:2,50 s/^/\/\//g`<br/>2-50行删除`//`: `:2, 50 s/^\/\/// |



## 格式化代码

>gg=G    **将全部代码格式化**
>
>nG=mG  **将第**n行到第**m**行的代码格式化
>
>自动缩进当前行指令 `==`
>
>格式化当前光标接下来8行 `8=`
>
>格式化选中行(v模式), 再按`=`格式化代码代码段

## 文本转换

> （1） **g~** 反转大小写 **gu** 转小写 **gU**转大写，（**gUU** 当前行全传大写，还有 **gUaW** [当前字 ]、**gUap** [当前段落]）
> （2）~ 当前字符替换大小写

## 代码块折叠

> ` :set foldmethod=manual`

| 指令(操作)  | 描述                                       |
| ----------- | ------------------------------------------ |
| zf56j       | 向下折叠56行                               |
| zf56G       | 创建从当前行起到56行的代码折叠             |
| `zd` | `zo` | 打开折叠                                   |
| `zc`        | 再次折叠                                   |
| zC          | 范围内所有嵌套的折叠点折叠                 |
| zO          | 对所在范围内所有嵌套的折叠点展开           |
| zE          | 除去当前窗口所有折叠                       |
| zf%         | 折叠对应匹配的括号(要先移动到对应符号上)   |
| zf          | 折叠选择的行 [ 可视化模式下 ]              |
| zfa(        | 折叠括号（比如()、[]、{}、><等）包围的区域 |
| :mkview     | 保存当前的折叠状态                         |
| :loadview   | 载入记忆的折叠信息                         |
|             |                                            |

```text

```



## 制表符号

| 指令                                                         | 描述                        |
| ------------------------------------------------------------ | --------------------------- |
| `>> `  || `<<`                                               | 可以缩进或缩出              |
| `n>>`  || `n<<`（ n自然数 ）                                 | 可以缩进或缩出n次           |
| visual状态, 选定多行，用“n >或< n” ( n为自然数 )             | 缩进或缩出                  |
| ：m,n>  \|\| ：m,n<  ( 输入多个 < \|\| > , 就可移动对应对应数) | 第m行到第n行左(右)移一个tab |
| :.,+3 >                                                      | 当前行往下及往下三行都右移  |
|                                                              |                             |
|                                                              |                             |

## mark使用

> `:mark 标记名`  :  设置标签
>
> ``标记名` :  跳转到该标签

## 替换

> c    [number]   motion
>
> `ce` : 会进入插入模式

| 指令 | 描述                   |
| ---- | ---------------------- |
| `r`  | 替换当前光标选择的字符 |
| `cw` | 修改光标到该单词末尾   |
> `:s/old/new/g ` : 可以替换 old 为 new
>
> ` :#,#s/old/new/g`   其中 #,# 代表的是替换操作的若干行中首尾两行的行号。
> `:%s/old/new/g`     则是替换整个文件中的每个匹配串。
> `:%s/old/new/gc`    会找到整个文件中的每个匹配串，并且对每个匹配串
>                     提示是否进行替换。

### 替換（substitute）

> ```shell
> :[range]s/pattern/string/[c,e,g,i]5.1
> // 我的常用写法
> :.,+10s/pattern/string/g => 修改当前行往下十行
> ```

| **range**   | 指的是範圍<br/>1,7 指從第一行至第七行<br>a1,$ 指從第一行至最後一行，也可以 % 代表。還記得嗎？ % 是目前編輯的文章，# 是前一次編輯的文章。 |
| ----------- | ------------------------------------------------------------ |
| **pattern** | 就是要被替換掉的字串，可以用 regexp 來表示。                 |
| **string**  | 將 pattern 由 string 所取代。                                |
| **c**       | confirm，每次替換前會詢問。                                  |
| **e**       | 不顯示 error。                                               |
| **g**       | globe，不詢問，整行替換。                                    |
| **i**       | ignore 不分大小寫。                                          |



> - `$`:  最后一行
>
> - `.`:  第一行
> - `%`:  每一行
>
> - 当`/`是需要匹配的字符, 可以使用`#` 或`+`
>   - `:s#vivian/#sky/# 替换当前行第一个 vivian/ 为 sky/`
>   - `:%s+/oradata/apras/+/user01/apras1+ （使用+ 来 替换 / ）： /oradata/apras/替换成/user01/apras1/`




```shell
替换一行的字符

:s/vivian/sky/ 替换当前行第一个 vivian 为 sky
:s/vivian/sky/g 替换当前行所有 vivian 为 sky


替换第n行到最后一行 $=>指向最后一行, 若n位. 则表示第一行开始

:n,$s/vivian/sky/ 替换第 n 行开始到最后一行中每一行的第一个 vivian 为 sky
:n,$s/vivian/sky/g 替换第 n 行开始到最后一行中每一行所有 vivian 为 sky


替换每一行的字符
:%s/vivian/sky/（等同于 :g/vivian/s//sky/） 替换每一行的第一个 vivian 为 sky
:%s/vivian/sky/g（等同于 :g/vivian/s//sky/g） 替换每一行中所有 vivian 为 sky

可以使用 # 作为分隔符，此时中间出现的 / 不会作为分隔符
:s#vivian/#sky/# 替换当前行第一个 vivian/ 为 sky/
:%s+/oradata/apras/+/user01/apras1+ （使用+ 来 替换 / ）： /oradata/apras/替换成/user01/apras1/
:s/vivian/sky/ 替换当前行第一个 vivian 为 sky
:s/vivian/sky/g 替换当前行所有 vivian 为 sky
:n,$s/vivian/sky/ 替换第 n 行开始到最后一行中每一行的第一个 vivian 为 sky
:n,$s/vivian/sky/g 替换第 n 行开始到最后一行中每一行所有 vivian 为 sky

(n 为数字，若 n 为 .，表示从当前行开始到最后一行)
:%s/vivian/sky/（等同于 :g/vivian/s//sky/） 替换每一行的第一个 vivian 为 sky
:%s/vivian/sky/g（等同于 :g/vivian/s//sky/g） 替换每一行中所有 vivian 为 sky
可以使用 # 作为分隔符，此时中间出现的 / 不会作为分隔符
:s#vivian/#sky/# 替换当前行第一个 vivian/ 为 sky/

利用 :s 命令可以实现字符串的替换。具体的用法包括：
:s/str1/str2/ 用字符串 str2 替换行中首次出现的字符串 str1
:s/str1/str2/g 用字符串 str2 替换行中所有出现的字符串 str1
:.,$ s/str1/str2/g 用字符串 str2 替换正文当前行到末尾所有出现的字符串 str1
:1,$ s/str1/str2/g 用字符串 str2 替换正文中所有出现的字符串 str1
:g/str1/s//str2/g 功能同上
从上述替换命令可以看到：g 放在命令末尾，表示对搜索字符串的每次出现进行替换；不加 g，表示只对搜索
字符串的首次出现进行替换；g 放在命令开头，表示对正文中所有包含搜索字符串的行进行替换操作。
```

### 其他

> 换行  : \r

## 搜索类

> `/ +string` : 以在当前文件中查找该字符串
>
> - `N`: 上一个查找处
> - `n`:  下一个查找处





##  保存&退出

> `!` : 强制控制

命令 | 简单说明
:---:|:---:
:w | 保存, 不退出 
:wq | 保存文件内容后退出, 另外一种替代的方法是用ZZ命令。 
ZZ | 保存文件内容后退出 
:q | 在未做任何编辑处理而准备退出 
## 终端

> - 目前觉得不好用
>
> ter: 打开终端
>
> exit 退出


## 其他

>   3. 输入 :help cmd 可以找到关于 cmd 命令的帮助。
>
>   4. 输入 CTRL-W CTRL-W  可以使您在窗口之间跳转。
>
>   5. 输入 :q 以关闭帮助窗口
>
>   6. 您可以创建一个 vimrc 启动脚本文件用来保存您偏好的设置。
>
>   7. 当输入 : 命令时，按 CTRL-D 可以查看可能的补全结果。
>      按 <TAB> 可以使用一个补全。






## 浏览器vim

> extension://aibcglbfblnogfjhbcmmpobjhnomhcdo/pages/options.html#commands
>
> -  `o`:  跳转到输入地址
>
> - 复制与window复制相通



### 网页滚动

| 指令 | 描述     |
| ---- | -------- |
| j    | 上滚     |
| k    | 下滚     |
| h    | 左滚     |
| l    | 右滚     |
| gg   | 滚到顶部 |
| G    | 滚到底部 |
| d | 上滚半个页面 |
| u | 下滚半个页面 |


### 常用指令

| 指令    | 描述                             |
| ------- | -------------------------------- |
| r       | 刷新页面                         |
| yy      | 复制当前链接                     |
| f       | 点击网页中的链接和按钮           |
| t       | 新开一个页面                     |
| o[小写] | 显示多功能搜索框                 |
| O[大写] | 搜索混合内容, 并在新的标签页打开 |
| /       | 在业内查找模式                   |
| n       | 查找下一处                       |
| N       | 查找上一处                       |
| H       | 在历史记录后退                   |
| L       | 在历史记录中前进                 |
| K       | 切换到右边的标签页               |
| J       | 切换到左边的标签页               |
|g0|切换到最左侧的标签页|
|x|关闭标签|
|X|恢复最近关闭标签|
|<< \| >>|左  \|  右移动标签页|

